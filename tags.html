---
layout: default
title: Tags
permalink: /tags/
---

<div class="tags-page">
  <header class="page-header">
    <h1 class="page-title" id="page-title">All Posts</h1>
  </header>

  <div class="tags-list">
    {% comment %}
    Build a list of tags with their post counts, then sort by count descending and show top 25
    {% endcomment %}
    {% assign tag_counts = "" | split: "" %}
    {% assign all_tags_lower = "" | split: "" %}
    
    {% for post in site.posts %}
      {% for category in post.categories %}
        {% assign category_lower = category | downcase %}
        {% unless all_tags_lower contains category_lower %}
          {% assign all_tags_lower = all_tags_lower | push: category_lower %}
        {% endunless %}
      {% endfor %}
      {% for tag in post.tags %}
        {% assign tag_lower = tag | downcase %}
        {% unless all_tags_lower contains tag_lower %}
          {% assign all_tags_lower = all_tags_lower | push: tag_lower %}
        {% endunless %}
      {% endfor %}
    {% endfor %}
    
    {% for tag_name in all_tags_lower %}
      {% assign count = 0 %}
      {% for post in site.posts %}
        {% assign post_tags = post.categories | concat: post.tags | join: ' ' | downcase %}
        {% if post_tags contains tag_name %}
          {% assign count = count | plus: 1 %}
        {% endif %}
      {% endfor %}
      {% assign tag_entry = tag_name | append: "|" | append: count %}
      {% assign tag_counts = tag_counts | push: tag_entry %}
    {% endfor %}
    
    {% assign sorted_tags = tag_counts | sort | reverse %}
    {% assign total_tags = sorted_tags | size %}
    
    <a href="/tags/" class="tag" data-tag="all" data-color="lavender">ALL</a>
    {% for tag_entry in sorted_tags limit:25 %}
      {% assign parts = tag_entry | split: "|" %}
      {% assign tag_name = parts[0] %}
      {% include tag-color.html tag=tag_name %}
      <a href="/tags/?tag={{ tag_name | url_encode }}" class="tag" data-tag="{{ tag_name }}" data-color="{{ tag_color }}">{{ tag_name | upcase }}</a>
    {% endfor %}
    {% if total_tags > 25 %}
    <button class="tag show-more-tags" data-color="lavender" id="show-more-tags">...</button>
    <span class="hidden-tags" id="hidden-tags" style="display: none;">
      {% for tag_entry in sorted_tags offset:25 %}
        {% assign parts = tag_entry | split: "|" %}
        {% assign tag_name = parts[0] %}
        {% include tag-color.html tag=tag_name %}
        <a href="/tags/?tag={{ tag_name | url_encode }}" class="tag" data-tag="{{ tag_name }}" data-color="{{ tag_color }}">{{ tag_name | upcase }}</a>
      {% endfor %}
    </span>
    {% endif %}
  </div>

  <section class="posts-grid" id="posts-container">
    {% for post in site.posts %}
    <article class="post-card" data-categories="{{ post.categories | join: ' ' | downcase }}" data-tags="{{ post.tags | join: ' ' | downcase }}">
      {% if post.categories.size > 0 %}
      {% assign cat = post.categories | first %}
      {% include tag-color.html tag=cat %}
      <div class="post-card-tag">
        <a href="/tags/?tag={{ cat | downcase | url_encode }}" class="tag" data-color="{{ tag_color }}">{{ cat | upcase }}</a>
      </div>
      {% endif %}
      
      <h2 class="post-card-title">
        <a href="{{ post.url }}">{{ post.title }}</a>
      </h2>
      
      <p class="post-card-excerpt">
        {{ post.excerpt | strip_html | truncate: 200 }}
      </p>
      
      <div class="post-card-meta">
        <span>{{ post.date | date: "%Y-%m-%d" }}</span>
        <span>Â·</span>
        <span>{% include reading-time.html content=post.content %}</span>
      </div>
    </article>
    {% endfor %}
  </section>
</div>

<script>
(function() {
  // Get tag from URL
  const urlParams = new URLSearchParams(window.location.search);
  const selectedTag = urlParams.get('tag');
  
  if (selectedTag && selectedTag !== 'all') {
    const tag = selectedTag.toLowerCase();
    
    // Update page title
    document.getElementById('page-title').textContent = selectedTag.charAt(0).toUpperCase() + selectedTag.slice(1);
    
    // Highlight active tag
    document.querySelectorAll('.tags-list .tag').forEach(tagEl => {
      if (tagEl.dataset.tag === tag) {
        tagEl.classList.add('active');
      }
    });
    
    // Filter posts
    document.querySelectorAll('.post-card').forEach(post => {
      const categories = post.dataset.categories || '';
      const tags = post.dataset.tags || '';
      const allTags = (categories + ' ' + tags).toLowerCase();
      
      if (allTags.includes(tag)) {
        post.style.display = '';
      } else {
        post.style.display = 'none';
      }
    });
  } else {
    // Show "All" as active
    document.querySelector('.tags-list .tag[data-tag="all"]')?.classList.add('active');
  }
  
  // Show more tags functionality
  const showMoreBtn = document.getElementById('show-more-tags');
  const hiddenTags = document.getElementById('hidden-tags');
  if (showMoreBtn && hiddenTags) {
    showMoreBtn.addEventListener('click', function() {
      hiddenTags.style.display = 'inline';
      showMoreBtn.style.display = 'none';
    });
  }
})();
</script>
